{"version":3,"sources":["uni-app:///main.js","webpack:////Users/hehang/Documents/github/qk-mobile/App.vue?1d72","webpack:////Users/hehang/Documents/github/qk-mobile/App.vue?7718",null,"webpack:////Users/hehang/Documents/github/qk-mobile/App.vue?388f","uni-app:///App.vue"],"names":["Vue","config","productionTip","prototype","$store","store","App","mpType","app","$mount"],"mappings":";;;;;;;;;;iDAAA,wCAAmB;AACnB;AACA,4E;;AAEAA,aAAIC,MAAJ,CAAWC,aAAX,GAA2B,KAA3B;AACAF,aAAIG,SAAJ,CAAcC,MAAd,GAAuBC,cAAvB;;AAEAC,aAAIC,MAAJ,GAAa,KAAb;;AAEA,IAAMC,GAAG,GAAG,IAAIR,YAAJ;AACLM,YADK,EAAZ;;;AAIA,UAAAE,GAAG,EAACC,MAAJ,G;;;;;;;;;;;;;ACbA;AAAA;AAAA;AAAA;AAAo8C,CAAgB,23CAAG,EAAC,C;;;;;;;;;;;ACAx9C;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;ACNL;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACuD;AACL;AACc;;;AAGhE;AAC0M;AAC1M,gBAAgB,iNAAU;AAC1B,EAAE,yEAAM;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAmyB,CAAgB,iyBAAG,EAAC,C;;;;;;;;;;;;;ACCvzB;AACA,4E;;;;;;;;;;AAUA;AACA;AACA;AACA;AACA;AACA,GALA;AAMA;AACA;AACA,GARA;AASA;AACA;AACA,GAXA;AAYA;AACA;AACA,WAFA,qBAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;AASA,KAtBA;AAuBA;AACA,UAxBA,oBAwBA;AACA;;AAEA;AACA;;;AAGA,WAFA,IAEA,QAFA,IAEA,CADA,OACA,QADA,OACA;AACA;AACA;AACA;AACA,gBADA,CACA,IADA,GACA;AACA;AACA;AACA;AACA,KAvCA;AAwCA,cAxCA,wBAwCA;AACA;AACA;AACA;AACA,OAHA,EAGA,EAHA;AAIA,KA7CA;AA8CA;AACA,mBA/CA,6BA+CA;AACA,8BADA;AAEA,KAjDA;AAkDA;AACA,oBAnDA,8BAmDA;AACA;AACA;AACA;AACA,cADA,kBACA,MADA,EACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkDA;AACA,gDAnDA;AAoDA,SArDA;AAsDA,YAtDA,gBAsDA,CAtDA,EAsDA;AACA;AACA,SAxDA;AAyDA;AACA;AACA;AACA;AACA;AACA;AACA,mCADA;AAEA,mCAFA;AAGA,iCAHA;AAIA,uBAJA,mBAIA,GAJA,EAIA;AACA;AACA;AACA;AACA,iBARA;;AAUA;AACA;AACA;AACA,mCADA;AAEA,4BAFA;AAGA,8BAHA;;AAKA;AACA;AACA;AACA,oBAvBA;;AAyBA,SApFA;;AAsFA,KA5IA;AA6IA;AACA,gBA9IA,0BA8IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BADA;AAEA,+BAFA;AAGA,iCAHA;AAIA,uCAJA;AAKA;AACA;AACA;AACA;AACA,eATA;;AAWA;AACA,SAjBA;;AAmBA;AACA;AACA;AACA,OAFA;AAGA,KAxKA,EAZA,E","file":"common/main.js","sourcesContent":["import 'uni-pages';import Vue from 'vue'\nimport App from './App'\nimport store from './store';\n\nVue.config.productionTip = false\nVue.prototype.$store = store;\n\nApp.mpType = 'app'\n\nconst app = new Vue({\n    ...App\n})\n\napp.$mount()","import mod from \"-!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./App.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./App.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1623317248376\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","var render, staticRenderFns, recyclableRender, components\nvar renderjs\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"App.vue\"\nexport default component.exports","import mod from \"-!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./App.vue?vue&type=script&lang=js&\"","<script>\n\timport qkConfig from './qk.config.js';\t// qk全局应用配置文件\n\timport store from '@/store';\n\n\t// #ifdef APP-PLUS\n\t// 插件来源：https://ext.dcloud.net.cn/plugin?id=4542\n\timport checkUpdate from '@/uni_modules/uni-upgrade-center-app/utils/check-update';\n\t\n\t// 插件来源：https://ext.dcloud.net.cn/plugin?id=5095\n\timport interceptorChooseImage from '@/uni_modules/json-interceptor-chooseImage/js_sdk/main.js';\n\t// #endif\n\r\n\texport default {\r\n\t\tonLaunch: function() {\n\t\t\tconsole.log('App Launch')\n\t\t\t// 初始化应用\n\t\t\tthis.initApp();\r\n\t\t},\r\n\t\tonShow: function() {\r\n\t\t\tconsole.log('App Show')\r\n\t\t},\r\n\t\tonHide: function() {\r\n\t\t\tconsole.log('App Hide')\r\n\t\t},\n\t\tmethods: {\n\t\t\t// 初始化应用\n\t\t\tinitApp () {\n\t\t\t\t// 监听网络状况\n\t\t\t\tthis.checkNetwork();\n\t\t\t\t\n\t\t\t\t// 初始化应用配置\n\t\t\t\tthis.initConfig();\n\t\t\t\t\n\t\t\t\t// 初始化云数据库\n\t\t\t\tthis.initDB();\n\t\t\t\t\n\t\t\t\t// 函数拦截器，处理登录函数\n\t\t\t\tthis.initCallFunction();\n\t\t\t\t\n\t\t\t\t// #ifdef APP-PLUS\n\t\t\t\t// 应用无访问摄像头/相册权限，引导跳到设置界面。\n\t\t\t\tinterceptorChooseImage()\n\t\t\t\t\n\t\t\t\t// app升级更新检测。\n\t\t\t\tthis.checkAppVersion();\n\t\t\t\t// #endif\n\t\t\t},\n\t\t\t// 初始化云数据库\n\t\t\tinitDB () {\n\t\t\t\tconst db = uniCloud.database();\n\t\t\t\t\n\t\t\t\t//clientDB异常处理函数\n\t\t\t\tfunction onDBError({\n\t\t\t\t\tcode, // 错误码详见https://uniapp.dcloud.net.cn/uniCloud/clientdb?id=returnvalue\n\t\t\t\t\tmessage\n\t\t\t\t}) {\n\t\t\t\t\tconsole.log(code,message);\n\t\t\t\t\t// 如果为登录失效，则跳转登录界面\n\t\t\t\t\tif(['TOKEN_INVALID_INVALID_CLIENTID', 'TOKEN_INVALID', 'TOKEN_INVALID_TOKEN_EXPIRED', 'TOKEN_INVALID_WRONG_TOKEN', 'TOKEN_INVALID_ANONYMOUS_USER',\n\t\t\t\t\t].includes(code)){\n\t\t\t\t\t\tuni.navigateTo({ url:'/pages/login/login' });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tinitConfig () {\n\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\tconst app = getApp({allowDefault: true})\n\t\t\t\t\tapp.globalData.config = qkConfig;\n\t\t\t\t}, 30);\n\t\t\t},\n\t\t\t// APP升级检测。\n\t\t\tasync checkAppVersion () {\n\t\t\t\tcheckUpdate();\n\t\t\t},\n\t\t\t// 登录函数拦截，记录收集设备信息，并处理返回\n\t\t\tinitCallFunction () {\n\t\t\t\t//拦截器封装callFunction\n\t\t\t\tlet callFunctionOption;\n\t\t\t\tuniCloud.addInterceptor('callFunction', {\n\t\t\t\t\tasync invoke(option) {\n\t\t\t\t\t\t// #ifdef APP-PLUS\n\t\t\t\t\t\t// 在APP端执行登录函数时，就记录用户的相关设备id\n\t\t\t\t\t\tif (option.name == 'uni-id-cf' && (\n\t\t\t\t\t\t\t\toption.data.action == 'register' \n\t\t\t\t\t\t\t\t|| option.data.action.slice(0, 5) == 'login')\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tlet oaid = await new Promise((callBack, fail) => {\n\t\t\t\t\t\t\t\tif (uni.getSystemInfoSync().platform == \"android\") {\n\t\t\t\t\t\t\t\t\tplus.device.getOAID({\n\t\t\t\t\t\t\t\t\t\tsuccess: function(e) {\n\t\t\t\t\t\t\t\t\t\t\tcallBack(e.oaid)\n\t\t\t\t\t\t\t\t\t\t\tconsole.log('getOAID success: ' + JSON.stringify(e));\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tfail: function(e) {\n\t\t\t\t\t\t\t\t\t\t\tfail()\n\t\t\t\t\t\t\t\t\t\t\tconsole.log('getOAID failed: ' + JSON.stringify(e));\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tcallBack()\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\n\t\t\t\t\t\t\tlet imei = await new Promise((callBack, fail) => {\n\t\t\t\t\t\t\t\tif (uni.getSystemInfoSync().platform == \"android\") {\n\t\t\t\t\t\t\t\t\tplus.device.getInfo({\n\t\t\t\t\t\t\t\t\t\tsuccess: function(e) {\n\t\t\t\t\t\t\t\t\t\t\tcallBack(e.imei)\n\t\t\t\t\t\t\t\t\t\t\tconsole.log('getOAID success: ' + JSON.stringify(e));\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tfail: function(e) {\n\t\t\t\t\t\t\t\t\t\t\tfail()\n\t\t\t\t\t\t\t\t\t\t\tconsole.log('getOAID failed: ' + JSON.stringify(e));\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tcallBack()\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\tlet deviceInfo = {\n\t\t\t\t\t\t\t\t\"push_clientid\": plus.push.getClientInfo().clientid, // 获取匿名设备标识符\n\t\t\t\t\t\t\t\t\"imei\": imei,\n\t\t\t\t\t\t\t\t\"oaid\": oaid,\n\t\t\t\t\t\t\t\t\"idfa\": plus.storage.getItem('idfa') || '' //idfa有需要的用户在应用首次启动时自己获取存储到storage中\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconsole.log(\"重新登陆/注册，获取设备id\", deviceInfo);\n\t\t\t\t\t\t\toption.data.deviceInfo = deviceInfo;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// #endif\n\t\t\t\t\t\tconsole.log(JSON.stringify(option));\n\t\t\t\t\t\tcallFunctionOption = option\n\t\t\t\t\t},\n\t\t\t\t\tfail(e) { // 失败回调拦截\n\t\t\t\t\t\tuni.showModal({ content: \"系统错误请稍后再试！\", showCancel: false, confirmText: \"知道了\" });\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: (e) => {\n\t\t\t\t\t\t// 一些异常code处理\n\t\t\t\t\t\tswitch (e.result.code) {\n\t\t\t\t\t\t\tcase 403:\n\t\t\t\t\t\t\t\t// 无权限模块，引导跳转登录\n\t\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\t\tcontent: '该服务需要先登录',\n\t\t\t\t\t\t\t\t\tconfirmText: '前往登录',\n\t\t\t\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\t\t\t\tsuccess (res) {\n\t\t\t\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\t\t\t\tuni.navigateTo({ url: '/pages/login/login'})\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 50101:\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ttitle: e.result.msg,\n\t\t\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\t\t\tduration: 2000\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tconsole.log('code的值是：' + e.result.code, '可以在这里插入，自动处理响应体');\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t// 监听网络状态\n\t\t\tcheckNetwork () {\n\t\t\t\tconsole.info('checkNetwork');\n\t\t\t\tlet _thiz = this;\n\t\t\t\tuni.getNetworkType({\n\t\t\t\t\tsuccess: function (res) {\n\t\t\t\t\t\tconsole.info(res);\n\t\t\t\t\t\tif (res.networkType === 'none') {\n\t\t\t\t\t\t\t// 网络断开连接\n\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\ttitle: '网络异常',\n\t\t\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\t\t\tconfirmText: \"重新尝试\",\n\t\t\t\t\t\t\t\tcontent: '你的网络不太给力，请检查网络',\n\t\t\t\t\t\t\t\tsuccess: function (res) {\n\t\t\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\t\t\t_thiz.checkNetwork();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\t\n\t\t\t\t// 监听网络\n\t\t\t\tuni.onNetworkStatusChange((res) => {\n\t\t\t\t\t_thiz.checkNetwork();\n\t\t\t\t});\n\t\t\t}\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\n\t@import '@/static/scss/index.scss';\r\n\t/*每个页面公共css */\r\n</style>\n"],"sourceRoot":""}